<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Fossil Explorer</title>
    <link rel="icon" type="image/jpg" href="images/icon/favicon.jpg"/>
    <link href="css/master_style.css" type="text/css" rel="stylesheet">
    <link href="css/FSIDvis.css" type="text/css" rel="stylesheet">
    <link href="css/mapbox-gl.css" type="text/css" rel="stylesheet">

    <script src="lib/d3.min.js" type="text/javascript"></script>
    <script src="lib/jquery-3.5.1.min.js" type="text/javascript"></script>
    <script src="lib/lodash.js" type="text/javascript"></script>
    <script src="lib/deck.gl.min.js" type="text/javascript"></script>
    <script src="lib/mapbox-gl.js" type="text/javascript"></script>
    <script>
        var _hmt = _hmt || [];
        (function () {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?693caea3a45a586a47e819aed8c3dabe";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>
</head>
<body>
<div id="main">
    <div id="fsimg">
        <div class="buttonBorder">
            <button class="btn btn-default btn-xs imgButton close"></button>
            <button id="amplify" class="btn btn-default btn-xs imgButton"></button>
            <button id="narrow" class="btn btn-default btn-xs imgButton"></button>
            <!--            <button class="btn btn-default btn-xs imgButton drag"></button>-->
        </div>
        <img src="#" alt="#" width="100%" height="100%" style="display: inherit">
    </div>
    <div id="tooltip"></div>
    <div id="imageWindow">
        <div class="buttonBorder2">
            <button class="btn btn-default btn-xs imgButton drag"></button>
            <button class="btn btn-default btn-xs imgButton close"></button>
        </div>
        <div id="imgsContainer"></div>
    </div>
    <div id="mainview">
        <div class="topnav">
            <a href="index.html">Home</a>
            <a href="resources.html">Resources</a>
            <a href="about.html">About</a>
            <a href="scaling-performance.html">Scaling Performance</a>
        </div>
        <div id="map" class="container"></div>
        <div id="time" class="container"></div>
    </div>
</div>
</body>
<script src="script/util.js" type="text/javascript"></script>
<script src="script/setting.js" type="text/javascript"></script>
<script src="script/glyph.js" type="text/javascript"></script>
<script src="script/map.js" type="text/javascript"></script>
<script src="script/time.js" type="text/javascript"></script>
<script src="script/button.js" type="text/javascript"></script>
<script type="text/javascript">
    let dataList = [
        d3.json('data/tree2.json', d3.autoType),
        d3.csv('data/10wGPS.csv', d3.autoType)
    ];

    window.onload = function () {
        Promise.all(dataList).then(function (datas) {
            fossilData = datas[1];

            drawTree(datas[0], tree_g, clipTimeWidth, clipTimeHeight);
            setTimeout(function () {
                renderScatter(fossilData, map);
                mapboxSvg.on('mousemove', event => glyphMousemove(fossilData, glyph_g, sunburst_node_g, sunburst_label_g, event, 'map', map));
            }, 1000);

        });
    }
</script>
</html>
